<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Introduction to R</title>
	<link rel="stylesheet" type="text/css" href="pl.css"/>
</head>
<body>
<header>
	Introduction to the R Programming Language
</header>
<article>
	<div class="subheader">Key Language concepts in R</div>
		<table>
			<tbody>
			<tr>
				<td>First-Class Functions</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></td>
			</tr>
			<tr>
				<td>λ Expressions</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Higher-Order Functions</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>First-Class Closures</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Currying</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="indeterminate"></label></td>
				<td>Functional package</td>
			</tr>
			<tr>
				<td>Continuation-Passing Style</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>First-Class Continuations</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Pattern Matching</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="unchecked"></label></td>
			</tr>
			<tr>
				<td>Strong Typing</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="unchecked"></label></td>
			</tr>
			<tr>
				<td>Type Systems</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Lazy Evaluation</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>List/Generator Comprehension</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Message Passing</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="indeterminate"></label></td>
				<td>Rmpi and ipc package</td>
			</tr>
			<tr>
				<td>Actor Model of Concurrency</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Coroutines</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Channels</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="indeterminate"></label></td>
				<td>Thread safe Queues in ipc package</td>
			</tr>
			<tr>
				<td>Communicating Sequential Processes</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="indeterminate"></label></td>
				<td>Rmpi package</td>
			</tr>
			<tr>
				<td>Homoiconic</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Concurrency</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="indeterminate"></label></td>
				<td>Rmpi and IPC packages</td>
			</tr>
			<tr>
				<td>Callbacks</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="unchecked"></label></td>
			</tr>
			<tr>
				<td>Type Inference</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="unchecked"></label></td>
			</tr>
			<tr>
				<td>Dynamic Dispatch</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="unchecked"></label></td>
			</tr>
			<tr>
				<td>Dynamic Typing</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Heterogeneous Lists</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
			</tr>
			<tr>
				<td>Tail Recursion</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="checked"></label></td>
				<td>Can be implemented through trampolines</td>
			</tr>
			<tr>
				<td>Positional Parameter</td>
				<td><label><input type="checkbox" onclick="checkboxOnClick(this);" class="indeterminate"></label></td>
				<td>Functional package</td>
			</tr>
			</tbody>
			
			<script>
				let checks = document.getElementsByClassName("checked");
				let lines = document.getElementsByClassName("indeterminate");
				
				for (let i = 0; i < checks.length; i++) checks[i].checked = true;
				
				for (let i = 0; i < lines.length; i++) lines[i].indeterminate = true;
				
				function checkboxOnClick(self) {
					switch (self.classList[0]) {
						case "checked":
							self.checked = true;
							break;
						case "indeterminate":
							self.indeterminate = true;
							break;
						default:
							self.checked = false;
					}
				}
			</script>
		</table>
	<div class="subheader">History</div>
	<ul>
		<li>Initial release by Ross Ihaka and Robert Gentleman in 1995</li>
			<ul>
				<li>R is an implementation of S programming language</li>
			</ul>
		<li>Primarily used for statistical methods, graphing, and machine learning</li>
		<li>Default implementation is to be interpreted</li>
	</ul>

	<div class="subheader">Types</div>
	<ul>
		<li>Everything in R is an object</li>
		<li>These objects have classes as well as underlying primitive types of logical value, integer,
			double, complex numbers, character (string), list, closure, or null</li>
		<li>
			<code class="code-block">
				|vector = c(1,2,3)<br/>
				|typeof(vector) #returns double<br/>
				|vector = c(TRUE,1,"sned")<br/>
				|typeof(vector) #returns character<br/>
				|typeof(vector[1]) #returns character<br/>
			</code>
		</li>
	</ul>

	<div class="subheader">Coercion</div>
	<ul>
		<li>When possible, R will attempt to coerce data into the expected type</li>
		<li>
			<code class="code-block">
				|vector = c(1,2,3)<br/>
				|typeof(vector) #returns double<br/>
				|vector = c(TRUE,1,"sned")<br/>
				|typeof(vector) #returns character<br/>
				|typeof(vector[1]) #returns character<br/>
			</code>
		</li>
	</ul>

	<div class="subheader">First Class functions</div>
	<ul>
		<li>Functions in R can be both passed as arguments and returned from other functions</li>
		<li>
			<code class="code-block">
				|factfunc = function(n){ #Returns a function</br> 
				|\tfunction(){</br>
				|\t\t  if (n == 1){</br>
				|\t\t\t		return(1)</br>
				|\t\t	}else{ </br>
				|\t\t\t		return(n * factorial(n-1))</br>
				|\t\t	}</br>
				|\t}</br>
				|}</br></br>
				|	compare = function(func, x, y){ #Accepts function as argument<br/>
				|\t		return(func(x, y))<br/>
				|	}<br/><br/>
				|	  min = function(x, y){<br/>
				|\t		if (x < y){<br/>
				|\t\t		  return(x)<br/>
				|\t		}else{<br/>
				|\t\t		  return(y)<br/>
				|\t		}<br/>
				|	  }<br/><br/>
				|compare(min, 1, 4) #returns 1
			</code>
		</li>
	</ul>

	<div class="subheader">Classes</div>
	<ul>
		<li>There are 3 types of classes in R</li>
		<li>Reference Class</li>
		<code class="code-block">
			|student <- setRefClass("student",fields = list(name = "character", </br>
			|\tage = "numeric", GPA = "numeric")) <br/>
			|john = student(name="John", age=19, GPA=2.5)
		</code>
		<ul>
			<li>Reference Classes most closesly resemble traditional OOP classes and have the greatest functionality</li>
			<li>Can have both data and methods</li>
			<li>In addition, reference objects are pass by reference whereas S3 and S4 are both pass by value</li>
		</ul>
		<li>S4 class</li>
		<code class="code-block">
			|setClass("student", slots=list(name="character", age="numeric", GPA="numeric"))<br/>
			|john = student(name="John", age=19, GPA=2.5)
		</code>
		<ul>
			<li>Formally defined class structure</li>
			<li>Objects must match the defined structure to be apart of the class</li>
			<li>Methods cannot be defined on S3 or S4 class objects</li>
		</ul>
		<li>S3 class</li>
		<code class="code-block">
			|s <- list(name = "John", age = 21, GPA = 3.5)<br/>
			|class(s) <- "student"
		</code>
		<ul>
			<li>No class structure</li>
			<li>An object is apart of a class simply by setting the class attribute</li>
		</ul>
	</ul>

	<div class="subheader">Accessing Data Frames and vectors</div>
	<ul>
		<li>Vectors can have named entries as an alternative to accessing them via index</li>
		<li>
			<code class="code-block">
				|vect = c(51,52,53) </br>
				|vect[3]   #returns 53</br>
				|length(vect) </br>
				|names(vect) = c("A", "B","C")</br>
				|vect["C"]   #returns 53</br>
			</code>
		</li>
		<li>Accessing recursive objects such as data frames this way is done with a <code>$</code></li>
			<code class="code-block">
				|x <- data.frame("SN" = 2:3, "Age" = c(21,15), "Name" = c("John", "Dora"), stringsAsFactors = FALSE)</br>
				|#Creates the following data frame:</br></br>
				|#\t  SN Age Name</br>
				|#\t1  1  21 John</br>
				|#\t2  2  15 Dora</br></br>
				|x[1]   #returns 2 3</br>
				|x$Age   #returns 21 15</br>
				|x[2,]	#returns 3 15 Dora
				|x[2,2:3]	#returns 15 dora
			</code>
	</ul>

	<div class="subheader">Closures</div>
	<ul>
		<li>Closures are like lightweight objects that maintain their own environment</li>
		<li>
			<code class="code-block">
				|closure = function(x) {<br/>
				|\t	x = x<br/>
				|\t	function() {<br/>
				|\t\t  #x = x + 1 #Does not work<br/>
				|\t\t	  x <<- x + 1<br/>
				|\t\t  return(x)<br/>
				|\t	}<br/>
				|}<br/><br/>
				|env1 = closure(0)<br/>
				|env2 = closure(100)<br/>
				|env1() #returns 1<br/>
				|env1() #returns 2<br/> 
				|env2() #returns 101<br/>
			</code>
		</li>
	</ul>

	<div class="subheader">Lazy Evaluation, calls, formulas </div>
	<ul>
		<li>Expressions are not evaluated prior to being used in accordance with regular pass by value semantics</li>
		<li>
			<code class="code-block">
				|z = call("factorial",(5))   #An unenvaluated function call of factorial(5)<br/>
				|eval(z) #Returns 120<br/></br></br>
				|infList = function(x){  #infinite list of factorial numbers<br/>
				|\t	thunk = call("factorial", (x))<br/>
				|\t	function(){<br/>
				|\t\t	  print(eval(thunk))<br/>
				|\t\t	  x <<- x+1<br/>
				|\t\t	  thunk <<- call("factorial", (x))<br/>
				|\t	}<br/>
				|}<br/>
			</code>
		</li>
		<li>Calls are an unevaluated function call</li>
		<li>Formulas capture an unevaluated function call <i>and</i> the environment
			in which it was created and it often used to store relationships between variables
		</li>
		<li><code>y~x+b</code> denotes "Y is a function of x and b"</li>
	</ul>

	<div class="subheader">Continuation passing style</div>
	<ul>
		<li>
			<code class="code-block">
				|factorialCPS = function(n, acc){<br/>
				|\t	if(n == 1){<br/>
				|\t\t	  acc(n)<br/>
				|\t	}else{<br/>
				|\t	\t  CPS(n-1, (function(x) acc(n * x)))<br/>
				|\t	}<br/>
				|}<br/><br/>
				|factorialCPS(5, (function(x) print(x)))<br/>
			</code>
		</li>
		<li>However R compilers do not optimize recursion in any way</li>
	</ul>

	<div class="subheader">Machine Learning in R</div>
	<ul>
		<li>Step 1: Become familiar with the data</li>
		<li>
			<code class="code-block">
				|library(ggvis)</br>
				|library(class)</br>
				|library(gmodels)</br>
				|library(caret)</br></br></br>
				|iris #full dataset</br>
				|head(iris) #peak at column headers and first 6 vectors</br>
				|table(iris$Species) #See how many of each flower there are</br>
				|summary(iris[c("Petal.Width", "Sepal.Width")]) #brief stats on Petal and Sepal width</br></br>
				|iris %>% ggvis(~Sepal.Length, ~Sepal.Width, fill = ~Species) %>% layer_points() #pretty graph</br>
				|cor(iris$Sepal.Length, iris$Sepal.Width) #correlation of length vs width</br><br>
				|iris %>% ggvis(~Petal.Length, ~Petal.Width) %>% layer_points() #Other pretty graph</br>
				|cor(iris$Petal.Length, iris$Petal.Width)</br></br>
				|x = levels(iris$Species) #valid entries for Species</br>
				|(iris$Species==x[1]) #returns TRUE for each species matching x[1]</br></br>
				|cor(iris[iris$Species==x[1],1:4]) #setosa correlation matrix</br>
				|cor(iris[iris$Species==x[2], 1:4]) #versicolor matrix</br></br>
				|#code courtesy of Karlijn Williams
			</code>
		</li>
		<li>Step 2: Separate data into training and test sets</li>
		<li>
			<code class="code-block">
				|set.seed(1234) #set RNG environment for reproducability</br>
				|ind <- sample(2, nrow(iris), replace=TRUE, prob=c(0.67, 0.33)) #create list of True/FALSE</br>
				|iris.training <- iris[ind==1, 1:4] #gather training parameters</br>
				|iris.trainLabels <- iris[ind==1,5] #get training Answers</br></br>
				|iris.test <- iris[ind==2, 1:4]     #Gather test parameters</br>
				|iris.testLabels <- iris[ind==2, 5] #Get test Answers
			</code>
		</li>
		<li>Step 3: Train and test model</li>
		<li>
			<code class="code-block">
				|iris_pred <- knn(train = iris.training, test = iris.test, </br>
				|cl = iris.trainLabels, k=3) # Train model and make predictions</br></br></br>
				|#Format output into table and display stats
				|compare <- data.frame(iris_pred, iris.testLabels)</br>
				|names(compare) <- c("Predicted Species", "Observed Species")</br>
				|compare</br>
				|CrossTable(x = iris.testLabels, y = iris_pred, prop.chisq=FALSE)</br>
				|#code courtesy of Karlijn Williams
			</code>
		</li>
	</ul>
	<div class="subheader">Caret in R</div>
	<ul>
		<li>Caret is an external library that provides simple access to machine learning algorithms</li>
		<li>
			<code class="code-block">
				|library(caret) </br></br>
				|#split data into test and training</br>
				|index <- createDataPartition(iris$Species, p=0.75, list=FALSE)</br>
				|iris.training <- iris[index,]</br>
				|iris.test <- iris[-index,]</br></br>
				|model_knn <- train(iris.training[, 1:4], iris.training[, 5], method='knn') #train model</br>
				|predictions<-predict.train(object=model_knn,iris.test[,1:4], type="raw") #Predict values</br>
				|confusionMatrix(predictions,iris.test[,5]) #print in depth statistics</br>
				|#code courtesy of Karlijn Williams
			</code>
		</li>
		<li>Caret allows for easily switching between any of over 600 machine learning models by changing 
			<code>method='knn'</code> to an accepted model (ie. those displayed by <code>names(getModelInfo())</code> )</li>
	</ul>

	<div class="subheader">Homework</div>
	<ul>
		<li>
			Using the mtcars data frame, create a smaller dataframe that contains every other entry in mpg, hp, wt, and cyl.
			Then generate the set of graphs that plots these entries against each other. Finally, determine which two parameters have
			the greatest correlation and make a boxplot from these two fields.
		</li>
		<li>
			Find the mean and standard deviation of mtcars[mpg], and use this to find a 95% confidence interval.
			Then Determine how many of the data points lie within this confidence interval. <br/>
			Confidence interval Formula: mean +- 1.960 * SD / sqauareRoot(N) where N is the number of datapoints

		</li>
	</ul>	
	
	<div class="subheader">References</div>
	R Core Team. (2019, July 5). <i>An introduction to R</i>. Retrieved from https://cran.r-project.org/doc/manuals/r-release/R-intro.html<br/>
	Willems, k (2018, Novemer 20). <i>Machine Learning in R for Beginners</i>. Retrieved from https://www.datacamp.com/community/tutorials/machine-learning-in-r</br>
	<hr noshade size=“2” width=“75%”>
	<font size=“1” face=“Verdana, Helvetica, sans-serif, Times”> &copy; C. Reichel, Fall 2019, University of Dayton.
		Permission to use ideas about
		the organization of topics and any notes or material is granted,
		provided suitable acknowledgments and citations are made.
	</font>
</article>

<script src="pl.js"></script>
</body>
</html>
